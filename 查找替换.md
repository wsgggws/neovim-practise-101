# 查找替换 (17-20)

> ⭐ 简单 | 分类：基础编辑 | 预估时间：2 分钟

### 场景描述

查找替换是文本处理中最常用的功能之一，本章节覆盖从简单到正则的多种场景。

---

## 17. 简单查找替换

> 难度：⭐ | 预估时间：30 秒

### 初始状态

```text
hello world
hello neovim
hello vim
```

### 目标状态

```text
hi world
hi neovim
hi vim
```

---

### 操作方法

```vim
:%s/hello/hi/g
```

---

### 关键命令解析

| 命令  | 作用                   |
| ----- | ---------------------- |
| `:%s` | 全局替换               |
| `old` | 要替换的内容           |
| `new` | 替换为                 |
| `g`   | global（每行所有匹配） |

---

### 常见错误

- ❌ `:s/hello/hi/` - 只替换每行第一个
- ✅ `:%s/hello/hi/g` - 替换所有

---

### 检验清单

- [ ] 理解 `%s` 和 `s` 的区别
- [ ] 知道 `g` 标志的作用
- [ ] 能在 3 秒内完成

---

## 18. 替换当前行

> 难度：⭐ | 预估时间：30 秒

### 初始状态

```text
hello world hello neovim hello vim
```

### 目标状态

```text
hi world hi neovim hi vim
```

---

### 操作方法

```vim
:s/hello/hi/g
```

---

### 关键命令解析

| 命令 | 作用       |
| ---- | ---------- |
| `:s` | 替换当前行 |
| `/g` | 替换所有   |

---

### 检验清单

- [ ] 知道 `:s` 和 `:%s` 的区别
- [ ] 能在当前行快速替换

---

## 19. 大小写敏感替换

> 难度：⭐⭐ | 预估时间：1 分钟

### 初始状态

```text
Hello world
hello neovim
HELLO vim
```

### 目标状态

```text
Hi world
hi neovim
HELLO vim
```

---

### 操作方法

**方法一：区分大小写（默认）**

```vim
:%s/hello/hi/g
```

**方法二：不区分大小写**

```vim
:%s/hello/hi/gi
```

---

### 关键命令解析

| 标志 | 作用         |
| ---- | ------------ |
| `g`  | 全局替换     |
| `i`  | 不区分大小写 |
| `c`  | 确认每次替换 |

---

### 常见错误

- ❌ 用 `i` 导致意外替换
- ✅ 理解大小写敏感的含义

---

### 检验清单

- [ ] 知道 `i` 标志的作用
- [ ] 能根据需求选择大小写模式

---

## 20. 正则表达式替换

> 难度：⭐⭐ | 预估时间：1 分钟

### 初始状态

```text
file1.txt
file2.txt
file3.txt
```

### 目标状态

```text
file1.md
file2.md
file3.md
```

---

### 操作方法

```vim
:%s/file\(\d\+\)\.txt/file\1.md/g
```

---

### 关键命令解析

| 模式      | 作用             |
| --------- | ---------------- |
| `\d\+`    | 一个或多个数字   |
| `\(` `\)` | 捕获组           |
| `\1`      | 引用第一个捕获组 |
| `\.`      | 转义的点         |

---

### 进阶扩展

**使用更简洁的语法：**

```vim
:%s/file\zs\d\+\ze\.txt/\=submatch(0)-1/ge
```

---

### 检验清单

- [ ] 理解捕获组的概念
- [ ] 能使用 `\1` 反向引用
- [ ] 知道如何转义特殊字符

---

## 查找替换速查

| 操作         | 命令               | 说明     |
| ------------ | ------------------ | -------- |
| 当前行替换   | `:s/old/new/g`     |          |
| 全局替换     | `:%s/old/new/g`    |          |
| 确认替换     | `:%s/old/new/gc`   | 每次确认 |
| 大小写不敏感 | `:%s/old/new/gi`   |          |
| 范围替换     | `:1,10s/old/new/g` | 1-10 行  |

---

### 视频时间点

- **0:00** - 题目介绍
- **0:15** - 演示第 17 题
- **0:45** - 演示第 18 题
- **1:15** - 演示第 19 题
- **2:00** - 演示第 20 题

---

> **提示**：使用 `:noh` 清除搜索高亮。
