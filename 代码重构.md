# 代码重构 (32-34)

> ⭐⭐ 中等 | 进阶技能

## 32. 提取变量

**初始状态**：

```javascript
const total = price * 0.9 + price * 0.1;
```

**操作提示**：

```vim
" 使用 vim-rename-variable 插件（如果是 LSP）
" 或手动：
1. 选中 0.9
2. ciwdiscount<Esc>
3. 在上方添加声明
```

**目标状态**：

```javascript
const discount = 0.9;
const tax = 0.1;
const total = price * discount + price * tax;
```

---

## 33. 重命名变量

**初始状态**：

```python
def calculate(x):
    result = x * 2
    return result
```

**操作提示**：

```vim
" 使用 LSP 重命名
<leader>rn

" 手动：
:1,$s/x/number/g
:1,$s/result/doubled/g
```

**目标状态**：

```python
def calculate(number):
    doubled = number * 2
    return doubled
```

---

## 34. 函数参数对齐

**初始状态**：

```python
function_call(arg1, arg2, arg3, arg4, arg5)
```

**操作提示**：

```vim
" 手动操作：
1. 将光标移到括号内
2. 按 =
3. 或使用 gf 格式化
```

**目标状态**：

```python
function_call(
    arg1,
    arg2,
    arg3,
    arg4,
    arg5
)
```

---

## 代码重构命令

| 操作     | 命令         | 说明         |
| -------- | ------------ | ------------ |
| 重命名   | `<leader>rn` | LSP 重命名   |
| 查找引用 | `gr`         | LSP 查找引用 |
| 代码动作 | `<leader>ca` | LSP 代码动作 |
| 格式化   | `<leader>lf` | LSP 格式化   |
