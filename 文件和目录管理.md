# 文件和目录管理

## 111. 在 Neovim 中创建新文件

**场景**：需要快速创建新文件

**任务**：

1. 创建新文件 `utils/helper.js`
2. 在当前目录创建文件
3. 创建文件并立即开始编辑

**操作提示**：

- `:e new_file.txt` - 编辑新文件（保存时创建）
- `:e utils/helper.js` - 创建并编辑（会自动创建目录路径）
- `:enew` - 在新 buffer 中创建未命名文件
- `:new filename.txt` - 在水平分割中创建新文件
- `:vnew filename.txt` - 在垂直分割中创建新文件

**LazyVim/NvChad 快捷方式**：

- `<leader>fn` - 新建文件（在文件浏览器中）
- 在 Neo-tree 中按 `a` - 添加新文件

## 112. 文件重命名

**场景**：需要重命名当前正在编辑的文件

**初始状态**：

```text
当前文件: old_name.js
路径: /project/src/old_name.js
```

**目标**：
重命名为 `new_name.js` 并保持文件内容和编辑状态

**操作提示**：

- `:saveas new_name.js` - 另存为新文件
- `:file new_name.js` 然后 `:w` - 重命名 buffer 并保存
- `:!mv % new_name.js` - 使用系统命令移动
- `:Move new_name.js` - 使用 vim-eunuch 插件
- 在 Neo-tree 中按 `r` - 重命名文件

**完整流程（原生 Vim）**：

```vim
:saveas new_name.js    " 保存到新文件
:bd #                   " 删除旧 buffer
:!rm old_name.js       " 删除旧文件（可选）
```

## 113. 删除文件

**场景**：删除不再需要的文件

**任务**：

1. 删除当前正在编辑的文件
2. 删除指定的文件
3. 删除后自动关闭 buffer

**操作提示**：

- `:!rm %` - 删除当前文件（Unix/Linux/Mac）
- `:!del %` - 删除当前文件（Windows）
- `:call delete(expand('%'))` - Vim 原生删除
- `:Delete` - 使用 vim-eunuch 插件
- 在文件浏览器（Neo-tree/NvimTree）中按 `d` - 删除

**安全删除流程**：

```vim
:!rm %                 " 删除文件
:bd!                   " 关闭 buffer
```

## 114. 文件移动

**场景**：将文件移动到其他目录

**初始状态**：

```text
当前文件: /project/src/utils.js
```

**目标**：
移动到 `/project/lib/utils.js`

**操作提示**：

- `:!mv % ../lib/` - 使用系统命令
- `:Move ../lib/utils.js` - 使用 vim-eunuch 插件
- `:saveas ../lib/utils.js` 然后删除原文件

## 115. 目录操作

**场景**：在 Neovim 中管理目录

**任务**：

1. 创建新目录
2. 切换工作目录
3. 查看当前目录
4. 在文件浏览器中导航

**操作提示**：

- `:!mkdir new_dir` - 创建目录
- `:!mkdir -p path/to/dir` - 创建多级目录
- `:cd path/to/dir` - 切换工作目录
- `:lcd path/to/dir` - 只在当前窗口切换目录
- `:pwd` - 显示当前目录
- `:Ex` 或 `:Explore` - 打开文件浏览器（netrw）
- `<leader>e` - 打开文件树（LazyVim/NvChad）

## 116. 文件浏览器操作 (Neo-tree/NvimTree)

**场景**：使用文件树进行文件管理

**常用操作**：

**Neo-tree 快捷键**：

- `a` - 添加文件/文件夹
- `d` - 删除
- `r` - 重命名
- `x` - 剪切
- `c` - 复制
- `p` - 粘贴
- `y` - 复制文件名
- `Y` - 复制相对路径
- `m` - 移动
- `q` - 关闭
- `/` - 搜索
- `H` - 显示/隐藏隐藏文件

**NvimTree 快捷键**：

- `a` - 创建
- `d` - 删除
- `r` - 重命名
- `x` - 剪切
- `c` - 复制
- `p` - 粘贴
- `y` - 复制名称
- `Y` - 复制相对路径
- `gy` - 复制绝对路径
- `R` - 刷新

## 117. 批量文件操作

**场景**：对多个文件执行相同操作

**任务 1：批量重命名**

```text
将所有 .txt 文件改为 .md 文件
file1.txt -> file1.md
file2.txt -> file2.md
file3.txt -> file3.md
```

**操作提示（在终端）**：

```vim
:!for f in *.txt; do mv "$f" "${f%.txt}.md"; done
```

**任务 2：批量创建文件**

```text
创建以下文件结构：
components/
  Header.js
  Footer.js
  Sidebar.js
```

**操作提示**：

```vim
:!mkdir -p components
:!touch components/Header.js components/Footer.js components/Sidebar.js
```

## 118. 文件权限和属性

**场景**：查看和修改文件权限

**任务**：

1. 查看文件权限
2. 使脚本可执行
3. 修改文件权限

**操作提示**：

- `:!ls -l %` - 查看当前文件权限
- `:!chmod +x %` - 添加执行权限
- `:!chmod 755 %` - 设置特定权限
- `:!stat %` - 查看详细文件信息

## 119. 文件复制

**场景**：复制文件到其他位置

**任务**：

1. 复制当前文件到新位置
2. 创建文件副本
3. 备份当前文件

**操作提示**：

- `:!cp % new_file.txt` - 复制当前文件
- `:saveas backup.txt` - 另存为
- `:w new_copy.txt` - 写入新文件（原文件仍在 buffer）
- `:!cp % %.bak` - 创建备份

**在文件浏览器中**：

1. 选择文件
2. 按 `c` 复制
3. 导航到目标目录
4. 按 `p` 粘贴

## 120. 项目文件结构创建

**场景**：快速创建项目脚手架

**任务**：创建一个新的前端项目结构

**目标结构**：

```text
my-project/
├── src/
│   ├── components/
│   ├── utils/
│   ├── styles/
│   └── index.js
├── public/
│   └── index.html
├── tests/
└── package.json
```

**操作提示**：

```vim
:!mkdir -p my-project/{src/{components,utils,styles},public,tests}
:!touch my-project/src/index.js
:!touch my-project/public/index.html
:!touch my-project/package.json
:cd my-project
```

**或使用 Vim 脚本**：

```vim
:exe '!mkdir -p ' . expand('my-project/{src/{components,utils,styles},public,tests}')
:cd my-project
:e src/index.js
```

## 121. 文件搜索和打开

**场景**：快速查找并打开文件

**任务**：

1. 模糊搜索文件名
2. 按内容搜索文件
3. 打开最近编辑的文件

**操作提示（LazyVim/NvChad）**：

- `<leader>ff` - 查找文件（Telescope）
- `<leader>fg` - 按内容搜索（Grep）
- `<leader>fr` - 最近文件
- `<leader>fb` - 浏览 buffers
- `<leader>fw` - 搜索当前单词

**原生 Vim**：

- `:find filename` - 在 path 中查找文件
- `:find **/filename` - 递归查找
- `gf` - 打开光标下的文件名

## 122. 工作区和项目管理

**场景**：管理多个项目

**任务**：

1. 快速切换项目
2. 保存项目会话
3. 设置项目特定配置

**操作提示**：

- `:cd ~/projects/project-a` - 切换项目
- `:mksession! ~/sessions/project-a.vim` - 保存会话
- 创建 `.nvim.lua` - 项目本地配置

**使用 Project.nvim 插件**：

- `<leader>fp` - 项目列表
- 自动检测项目根目录
- 自动切换工作目录

## 123. 文件编码和格式

**场景**：处理不同编码的文件

**任务**：

1. 查看文件编码
2. 转换文件编码
3. 更改行结束符

**操作提示**：

- `:set fileencoding?` - 查看编码
- `:set fileencoding=utf-8` - 设置编码
- `:w ++enc=utf-8` - 以特定编码保存
- `:set fileformat=unix` - 设置为 Unix 格式（LF）
- `:set fileformat=dos` - 设置为 Windows 格式（CRLF）
- `:set fileformat?` - 查看当前格式
