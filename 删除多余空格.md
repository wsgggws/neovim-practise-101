# 删除多余空格 (7-8)

> ⭐ 简单 | 分类：基础编辑 | 预估时间：1 分钟

### 场景描述

代码中的多余空格会影响代码规范和可读性，这两道题教你快速清理空格。

---

## 7. 删除行尾空格

> 难度：⭐ | 预估时间：30 秒

### 初始状态

```text
hello world
neovim is great
practice makes perfect
```

### 目标状态

```text
hello world
neovim is great
practice makes perfect
```

---

### 操作方法

**方法一：substitute（推荐）**

```vim
:%s/\s\+$//
```

**方法二：可视选中后**

```vim
:'<,'>s/\s\+$//
```

---

### 关键命令解析

| 命令   | 作用               |
| ------ | ------------------ |
| `:%s`  | 全局替换           |
| `\s\+` | 一个或多个空白字符 |
| `$`    | 行尾               |
| `//`   | 替换为空           |

---

### 常见错误

- ❌ `:s/\s\+$//` - 只删除当前行
- ✅ `:%s/\s\+$//` - 删除所有行

---

### 进阶扩展

**删除所有多余空行：**

```vim
:%s/\n\{3,}/\r\r/e
```

**使用插件自动清理：**

```vim
:Trim  " nvim-trim 插件
```

---

### 检验清单

- [ ] 理解 `\s\+` 和 `$` 的含义
- [ ] 能在 5 秒内完成

---

## 8. 删除行首空格

> 难度：⭐ | 预估时间：30 秒

### 初始状态

```text
    hello
  world
   neovim
```

### 目标状态

```text
hello
world
neovim
```

---

### 操作方法

**方法一：substitute**

```vim
:%s/^\s\+//
```

**方法二：快捷键（选中后）**

```vim
Vjj
<<
```

---

### 关键命令解析

| 命令   | 作用     |
| ------ | -------- |
| `^`    | 行首     |
| `\s\+` | 空白字符 |

---

### 常见错误

- ❌ 只删除第一个空格
- ✅ 使用 `\s\+` 删除所有行首空格

---

### 进阶扩展

**同时删除行首和行尾空格：**

```vim
:%s/^\s\+\|\s\+$//g
```

---

### 检验清单

- [ ] 理解 `^` 和 `$` 的作用
- [ ] 知道 `<<` 和 substitute 的区别

---

## 空格处理技巧速查

| 操作         | 命令                  | 说明           |
| ------------ | --------------------- | -------------- |
| 删除行尾空格 | `:%s/\s\+$//`         | 正则匹配       |
| 删除行首空格 | `:%s/^\s\+//`         | 正则匹配       |
| 删除两端空格 | `:%s/^\s\+\|\s\+$//g` | 组合           |
| 删除多余空行 | `:%s/\n\{3,}/\r\r/e`  | 连续空行变一行 |
| 智能空格清理 | `:Trim`               | nvim-trim 插件 |

---

### 视频时间点

- **0:00** - 题目介绍
- **0:15** - 演示第 7 题
- **0:45** - 演示第 8 题
- **1:30** - 进阶技巧

---

> **提示**：建议配合 `:set list` 查看隐藏字符。
