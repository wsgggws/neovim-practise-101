# 数字操作 (46-49)

> ⭐⭐ 中等 | 分类：数据处理 | 预估时间：3 分钟

### 场景描述

使用 Vim 的表达式替换功能处理数字。

---

## 46. 数字递增

> 难度：⭐⭐ | 预估时间：1 分钟

### 初始状态

```text
0
0
0
0
```

### 目标状态

```text
1
2
3
4
```

---

### 操作方法

```vim
:let i=1 | %s/\d\+/\=i/ | let i+=1
```

---

### 关键命令解析

| 部分       | 含义         |
| ---------- | ------------ |
| `:let i=1` | 初始化变量   |
| `\d\+`     | 匹配数字     |
| `\=i`      | 替换为变量值 |
| `let i+=1` | 递增         |

---

### 检验清单

- [ ] 理解表达式替换
- [ ] 知道如何初始化和使用变量

---

## 47. 数字递减

> 难度：⭐⭐ | 预估时间：1 分钟

### 初始状态

```text
10
10
10
10
```

### 目标状态

```text
10
9
8
7
```

---

### 操作方法

```vim
:let i=10 | %s/\d\+/\=i/ | let i-=1
```

---

### 检验清单

- [ ] 知道如何递减
- [ ] 理解 `let i-=1` 的作用

---

## 48. 批量增加数字

> 难度：⭐⭐ | 预估时间：1 分钟

### 初始状态

```text
version 1
version 1
version 1
```

### 目标状态

```text
version 2
version 3
version 4
```

---

### 操作方法

```vim
:let i=2 | %s/\d\+/\=i/ | let i+=1
```

---

### 检验清单

- [ ] 能处理带文字的数字
- [ ] 知道如何自定义起始值

---

## 49. 数字格式化

> 难度：⭐⭐ | 预估时间：1 分钟

### 初始状态

```text
1
10
100
1000
```

### 目标状态

```text
0001
0010
0100
1000
```

---

### 操作方法

```vim
:%s/\d\+/\=printf('%04d', submatch(0))/
```

---

### 关键命令解析

| 部分                  | 含义       |
| --------------------- | ---------- |
| `printf('%04d', ...)` | 格式化数字 |
| `submatch(0)`         | 原始匹配   |

---

### 检验清单

- [ ] 知道 `printf` 的用法
- [ ] 能格式化不同宽度的数字

---

## 数字操作速查

| 操作   | 命令                                  |
| ------ | ------------------------------------- |
| 递增   | `:let i=x \| %s/.../\=i/ \| let i+=1` |
| 递减   | `:let i=x \| %s/.../\=i/ \| let i-=1` |
| 补零   | `printf('%04d', submatch(0))`         |
| 格式化 | `printf('%0Nd', num)`                 |

---

### 视频时间点

- **0:00** - 题目介绍
- **0:30** - 演示第 46 题
- **1:00** - 演示第 47 题
- **1:30** - 演示第 48 题
- **2:00** - 演示第 49 题

---

> **提示**：使用 `Ctrl-a` 可以对光标下的数字递增。
